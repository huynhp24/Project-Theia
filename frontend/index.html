<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>THEIA</title>

    <!-- FONT AWESOME -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css">

    <!-- FONT GOOGLE -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;700&display=swap" rel="stylesheet">

    <!-- OWL CSS -->
    <link rel="stylesheet" href="./css/owl.carousel.min.css">
    <link rel="stylesheet" href="./css/owl.theme.default.min.css">

    <!-- BOOTSTRAP -->
    <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
        integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous"> -->

    <!-- MAIN CSS -->
    <link rel="stylesheet" href="./css/index.css">
</head>

<body>
    <!-- HEADER -->
    <header>
        <div class="header__content">
            <p>THEIA</p>
            <nav>
                <ul id="mainNav">
                    <li class="active"><a href="#">HOME</a></li>
                    <li><a href="#services">SERVICES</a></li>
                    <li><a href="#team">DEVELOPERS</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- CAROUSEL -->
    <section class="carousel">
        <div class="carousel__content">
            <h1>OBJECT DETECTION ASSISTANT</h1>
            <p>Automate your image analysis with machine learning.</p> <br> <br>
            <div class="carousel__options" id="showResult">
                <div class="carousel__item">
                    <!-- <label for="imageUpload">Upload an image</label> <br> -->
                    <label for="imageUpload">Upload an image</label> <br>
                    <input id="imageUpload" type="file" name="img_path" accept=".png, .jpg" max-size=15728640
                        hidden="hidden" onchange="submitPhoto(this)">
                    <button id="custom-button">Choose File</button>
                    <span id="custom-text">No file chosen</span>
                    <!-- <button onclick="return upload()">Upload image</button>   -->
                </div>
                <br> <br> <br> <br>
                <div class="carousel__item">
                    <form action="" method="GET">
                        <label for="pasteURL">Paste image URL</label> <br>
                        <!-- <input id="pasteURL" type="url" name="img_url" placeholder=".jpg or .png" pattern="*\.(jpg|png)" required> <br> -->
                        <input type="url" id="pasteURL" name="img_url"
                            placeholder="http://example.jpg OR http://example.png" required
                            pattern="(?:([^:/?#]+):)?(?://([^/?#]*))?([^?#]*\.(?:jpg|png))(?:\?([^#]*))?(?:#(.*))?">
                        <br>
                        <!-- <input type="submit" name="btn_submit" value="Search by image"> -->
                        <button type="submit" onclick="submitURL()">Search by image</button>
                    </form>
                </div>
            </div>

        </div>
    </section>

    <!-- NUMBER -->
    <section class="number">
        <h2>STATS</h2>
        <div class="number__content">
            <div class="number__item">
                <p class="num">1245</p>
                <p>Users</p>
            </div>
            <div class="number__item">
                <p class="num">3580</p>
                <p>Pictures Uploaded</p>
            </div>
            <div class="number__item">
                <p class="num">1050</p>
                <p>Likes</p>
            </div>
            <div class="number__item">
                <p class="num">560</p>
                <p>Shared</p>
            </div>
        </div>
    </section>

    <!-- SERVICES -->
    <section class="services" id="services">
        <h2>SERVICES</h2>
        <div class="services__content">
            <div class="services__item">
                <i class="fa fa-envelope-open-text"></i>
                <h3>Text</h3>
                <p>Detect text in images: text in natural scenes (road signs, license plates), text over objects
                    (t-shirts, mugs), and text on screen (captions, news)</p>
            </div>
            <div class="services__item">
                <i class="fa fa-city"></i>
                <h3>Scenes and Objects</h3>
                <p>Identify thousands of objects (such as building, vehicles, pets, furniture), and scenes (such as
                    parking lot, sunset, beach, city)</p>
            </div>
            <div class="services__item">
                <i class="fa fa-male"></i>
                <h3>Person</h3>
                <p>Detect when faces appear in images and get attributes (such as gender, age range, eyes open, glasses,
                    facial hair) for each</p>
            </div>
            <div class="services__item">
                <i class="fa fa-volume-up"></i>
                <h3>Audio</h3>
                <p>Converts text to lifelike speech to read labels and texts in images</p>
            </div>
        </div>
    </section>

    <!-- FEEDBACK -->
    <section class="feedback" id="feedback">
        <h2>REVIEWS</h2>
        <div class="feedback__content">
            <div class="owl-carousel owl-theme">
                <div class="item">
                    <p><i class="fa fa-quote-left"></i> Lorem ipsum dolor sit amet consectetur adipisicing elit. Maiores
                        nostrum ab nobis voluptatum ullam repellat placeat enim illo ipsum laborum. <i
                            class="fa fa-quote-right"></i></p>
                    <p class="feedback__name">KEVIN</p>
                </div>
                <div class="item">
                    <p><i class="fa fa-quote-left"></i> Lorem ipsum dolor sit amet consectetur adipisicing elit. Maiores
                        nostrum ab nobis voluptatum ullam repellat placeat enim illo ipsum laborum. <i
                            class="fa fa-quote-right"></i></p>
                    <p class="feedback__name">SAKURA</p>
                </div>
                <div class="item">
                    <p><i class="fa fa-quote-left"></i> Lorem ipsum dolor sit amet consectetur adipisicing elit. Maiores
                        nostrum ab nobis voluptatum ullam repellat placeat enim illo ipsum laborum. <i
                            class="fa fa-quote-right"></i></p>
                    <p class="feedback__name">KERO</p>
                </div>
            </div>
        </div>
    </section>

    <!-- TEAM -->
    <section class="team" id="team">
        <h2>THE A TEAM</h2>
        <div class="team__content">
            <div class="team__item">
                <img src="./img/Nhi.jpg" alt="team 1">
                <div class="team__title">
                    <h3>Nhi Truong</h3>
                    <p>-FrontEnd Developer</p>
                </div>
                <div class="team__details">
                    <h3>Nhi Truong</h3>
                    <p class="team__text">-Front End Developer</p>
                    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit.</p>
                    <div class="team__socials">
                        <i class="fab fa-facebook-f"></i>
                        <i class="fab fa-twitter"></i>
                        <i class="fab fa-github"></i>
                    </div>
                </div>
            </div>
            <div class="team__item">
                <img src="./img/Tien.png" alt="team 2">
                <div class="team__title">
                    <h3>Tien Pham</h3>
                    <p>-FrontEnd Developer</p>
                </div>
                <div class="team__details">
                    <h3>Tien Pham</h3>
                    <p class="team__text">-Front End Developer</p>
                    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit.</p>
                    <div class="team__socials">
                        <i class="fab fa-facebook-f"></i>
                        <i class="fab fa-twitter"></i>
                        <i class="fab fa-github"></i>
                    </div>
                </div>
            </div>
            <div class="team__item">
                <img src="./img/Yenni.jpg" alt="team 3">
                <div class="team__title">
                    <h3>Yenni Lam</h3>
                    <p>-BackEnd Developer</p>
                </div>
                <div class="team__details">
                    <h3>Yenni Lam</h3>
                    <p class="team__text">-BackEnd Developer</p>
                    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit.</p>
                    <div class="team__socials">
                        <i class="fab fa-facebook-f"></i>
                        <i class="fab fa-twitter"></i>
                        <i class="fab fa-github"></i>
                    </div>
                </div>
            </div>
            <div class="team__item">
                <img src="./img/Huynh.jpg" alt="team 4">
                <div class="team__title">
                    <h3>Huynh Phan</h3>
                    <p>-BackEnd Developer</p>
                </div>
                <div class="team__details">
                    <h3>Huynh Phan</h3>
                    <p class="team__text">-BackEnd Developer</p>
                    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit.</p>
                    <div class="team__socials">
                        <i class="fab fa-facebook-f"></i>
                        <i class="fab fa-twitter"></i>
                        <i class="fab fa-github"></i>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- FOOTER -->
    <footer>
        <div class="footer__main">
            <div class="footer__item">
                <h3>About Us</h3>
                <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Quaerat nihil blanditiis voluptatibus magni
                    natus nisi.</p>
                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Dolorem, aperiam!</p>
                <div class="footer__socials">
                    <i class="fab fa-facebook-f"></i>
                    <i class="fab fa-twitter"></i>
                    <i class="fab fa-github"></i>
                </div>
            </div>
            <div class="footer__item">
                <h3>Our Location</h3>
                <div class="footer__map">
                    <iframe
                        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3172.3090416297778!2d-121.88326018397692!3d37.33519164509939!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x808fccb864de43d5%3A0x397ffe721937340e!2sSan%20Jos%C3%A9%20State%20University!5e0!3m2!1sen!2sus!4v1614244550409!5m2!1sen!2sus"
                        width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
                </div>
            </div>
            <div class="footer__item">
                <h3>Contact Us</h3>
                <div class="footer__contact">
                    <i class="fa fa-envelope"></i>
                    <p>theia.levantine.io@gmail.com</p>
                    <br>
                    <i class="fa fa-phone"></i>
                    <p>(408) 924-1000</p>
                </div>
            </div>
            <div class="footer__item">
                <h3>Subscribe Us</h3>
                <form class="footer__sub">
                    <input type="email" placeholder="name@example.com">
                    <button type="submit">Send</button>
                </form>
            </div>
        </div>
        <div class="footer__copyright">
            <p>&copy; 2021 Project Theia. All rights reserved. | Design by <span>Group 6</span> </p>
        </div>
    </footer>

    <!-- BACK TO TOP -->
    <a href="#" class="backToTop cd-top text-replace js-cd-top">
        <i class="fa fa-angle-up"></i>
    </a>



    <script>
        const imageUploadBtn = document.getElementById("imageUpload");
        const customBtn = document.getElementById("custom-button");
        const customTxt = document.getElementById("custom-text");

        customBtn.addEventListener("click", function () {
            imageUploadBtn.click();
        });

        imageUploadBtn.addEventListener("change", function () {
            if (imageUploadBtn.value) {
                customTxt.innerHTML = imageUploadBtn.value.match(/[\/\\]([\w\d\s\.\-\(\)]+)$/)[1];
            } else {
                customTxt.innerHTML = "No file chosen";
            }
        });
    </script>

    <!-- JS to submit photo -->
    <script>
        function reqListener() {
            console.log(this.responseText);
        }

        function submitPhoto(e) {
            let xhr = new XMLHttpRequest();
            let formData = new FormData();
            let photo = e.files[0];

            formData.append("file", photo);

            xhr.onreadystatechange = state => { console.log(xhr.status); } // err handling
            xhr.addEventListener("load", reqListener);
            xhr.open("POST", "/theia/api/v1.0/img_path", true);
            // xhr.setRequestHeader("Content-Type","multipart/form-data");
            xhr.send(formData);
        }
    </script>

    <!-- JS to paste URL -->
    <script>
        function reqListener() {
            console.log(this.responseText);

            info_path = "/theia/api/v1.0/get_info";
            const path_uuid = info_path + "?uuid=" + this.responseText;
            console.log(path_uuid);

            const fetchResult = () => {
                axios({
                    url: `${path_uuid}`,
                    method: "GET",
                    timeout: 5000,
                })
                    .then((res) => {
                        console.log(res);
                        console.log(res.data);

                        uuid = res.data.uuid;
                        img_file = res.data.img_file;
                        label_list = res.data.label_list;
                        nat_sentence = res.data.nat_sentence;
                        audio_file_location = res.data.audio_file_location;

                        renderResult();
                    })
                    .catch((err) => {
                        console.log(err);
                    });
            };

            const renderResult = () => {
                let htmlContent = "";
                htmlContent =
                    `
                    <div class="rekognition_result">
                        <p><img src="${img_file}" alt="${uuid}" width="200px" height="200px"></p>
                        <p>${label_list}</p>
                        <p>${nat_sentence}</p> 
                        <audio controls><source src="${audio_file_location}"></audio>
                    </div>;`
                console.log(htmlContent);
                document.getElementById('showResult').innerHTML = htmlContent;
            }

            fetchResult();
        }

        function submitURL() {
            const img_url = document.querySelector('#pasteURL').value;

            const xhr = new XMLHttpRequest();
            xhr.addEventListener("load", reqListener);
            xhr.open('POST', '/theia/api/v1.0/img_url', true);
            xhr.setRequestHeader('Content-Type', 'plain/text');
            xhr.send(img_url);
        }
    </script>

    <!-- Jquery Library -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"
        integrity="sha512-bZS47S7sPOxkjU/4Bt0zrhEtWx0y0CRkhEp8IckzK+ltifIIE9EMIMTuT/mEzoIMewUINruDBIR/jJnbguonqQ=="
        crossorigin="anonymous"></script>"></script>

    <!-- Jquery Waypoints -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/waypoints/4.0.1/jquery.waypoints.js"
        integrity="sha512-ZKNVEa7gi0Dz4Rq9jXcySgcPiK+5f01CqW+ZoKLLKr9VMXuCsw3RjWiv8ZpIOa0hxO79np7Ec8DDWALM0bDOaQ=="
        crossorigin="anonymous"></script>


    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"
        integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ=="
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns" crossorigin="anonymous"></script> -->

    <!-- CountUp JS -->
    <script src="./js/jquery.countup.js"></script>
    <script>
        $('.num').countUp();
    </script>

    <!-- OWL JS -->
    <script src="./js/owl.carousel.min.js"></script>
    <script>
        $('.owl-carousel').owlCarousel({
            loop: true,
            nav: false,
            autoplay: true,
            responsive: {
                0: {
                    items: 1
                },
            }
        })
    </script>

    <!-- Back to Top JS -->
    <script src="./js/util.js"></script>
    <script src="./js/main-backToTop.js"></script>

    <!-- Navigation bar JS -->
    <script>
        var mainNav = document.getElementById("mainNav");
        var listNav = mainNav.getElementsByTagName("li");
        for (var i = 0; i < listNav.length; i++) {
            listNav[i].addEventListener("click", function () {
                var current = document.querySelector("#mainNav .active")
                current.className = current.className.replace("active", "");
                this.className += "active";
            });
        }
    </script>
</body>

</html>